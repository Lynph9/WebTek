<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>İlgi Alanlarım - Kişisel Web Sitesi</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container">
            <a class="navbar-brand" href="index.html">Kişisel Web Sitesi</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="index.html">Hakkında</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="cv.html">Eğitim Bilgileri</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="sehrim.html">Şehrim</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="mirasimiz.html">Mirasımız</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" href="ilgi-alanlari.html">İlgi Alanları</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="login.html">Giriş</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="iletisim.html">İletişim</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="container my-5">
        <header class="text-center mb-5">
            <h1>İlgi Alanlarım</h1>
            <p class="lead">Boş zamanlarımda keyif aldığım ve yeni şeyler keşfettiğim bazı ilgi alanlarım.</p>
        </header>

        <!-- FreeToGame API Section -->
        <section class="mb-5">
            <h2 class="mb-4">Gelecek Oyun Maceralarım: Ücretsiz Keşifler</h2>
            <p>Her zaman yeni ve heyecan verici ücretsiz oyunlar arayışındayım. İşte FreeToGame API'sinden bazı güncel öneriler:</p>
            <div class="mb-3">
                <button id="getFreeGamesButton" class="btn btn-primary">Yeni Oyun Önerileri Getir</button>
            </div>
            <div id="freeGamesLoadingIndicator" class="text-center d-none">
                <div class="spinner-border text-primary" role="status"><span class="visually-hidden">Yükleniyor...</span></div>
                <p>Oyun verileri getiriliyor...</p>
            </div>
            <div id="freeGamesErrorMessage" class="alert alert-danger d-none" role="alert"></div>
            <div class="row" id="freeGamesContainer">
                <!-- FreeToGame API results will be displayed here -->
            </div>
        </section>

        <!-- TheMealDB API Section -->
        <section class="mb-5">
            <h2 class="mb-4">Mutfak Deneyleri: Günün Tarifi</h2>
            <p>Mutfakta yeni tatlar denemeyi seviyorum. İşte TheMealDB API'sinden rastgele bir tarif ilhamı:</p>
            <div class="mb-3">
                <button id="getRandomRecipeButton" class="btn btn-success">Rastgele Tarif Getir</button>
            </div>
            <div id="recipeLoadingIndicator" class="text-center d-none">
                <div class="spinner-border text-success" role="status"><span class="visually-hidden">Yükleniyor...</span></div>
                <p>Tarif getiriliyor...</p>
            </div>
            <div id="recipeErrorMessage" class="alert alert-danger d-none" role="alert"></div>
            <div id="recipeContainer" class="card">
                <!-- TheMealDB API result will be displayed here -->
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="bg-dark text-white py-4">
        <div class="container text-center">
            <p>&copy; 2024 Kişisel Web Sitesi. Tüm hakları saklıdır.</p>
        </div>
    </footer>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    
    <script>
        // DOM Elements
        let freeGamesContainer, freeGamesLoadingIndicator, freeGamesErrorMessage, getFreeGamesButton;
        let recipeContainer, recipeLoadingIndicator, recipeErrorMessage, getRandomRecipeButton;

        // API URLs
        const FREETOGAME_API_URL = 'https://www.freetogame.com/api/games?platform=pc&sort-by=relevance'; // Example: PC games sorted by relevance
        const MEALDB_RANDOM_API_URL = 'https://www.themealdb.com/api/json/v1/1/random.php';

        // --- FreeToGame API Functions ---
        async function fetchFreeGames() {
            showLoading('freeGames', true);
            hideError('freeGames');
            freeGamesContainer.innerHTML = '';

            try {
                // Add a cache-busting parameter to try and get different results if the API caches aggressively
                const response = await fetch(`${FREETOGAME_API_URL}&timestamp=${new Date().getTime()}`);
                if (!response.ok) throw new Error(`FreeToGame API yanıt vermedi (${response.status})`);
                const data = await response.json();
                
                if (data && data.length > 0) {
                    // Display a limited number of games, e.g., first 6
                    displayFreeGames(data.slice(0, 6));
                } else {
                    throw new Error('Oyun bulunamadı veya API formatı beklenmedik.');
                }
            } catch (error) {
                console.error('Error fetching free games:', error);
                showError('freeGames', `Oyunlar yüklenemedi: ${error.message}`);
            } finally {
                showLoading('freeGames', false);
            }
        }

        function displayFreeGames(games) {
            games.forEach(game => {
                const gameCard = document.createElement('div');
                gameCard.className = 'col-md-4 mb-4';
                gameCard.innerHTML = `
                    <div class="card h-100">
                        <img src="${game.thumbnail}" class="card-img-top" alt="${game.title}">
                        <div class="card-body">
                            <h5 class="card-title">${game.title}</h5>
                            <p class="card-text"><small class="text-muted">${game.genre} | ${game.platform}</small></p>
                            <p class="card-text">${game.short_description}</p>
                        </div>
                        <div class="card-footer">
                            <a href="${game.game_url}" class="btn btn-primary btn-sm" target="_blank">Oyuna Git</a>
                        </div>
                    </div>
                `;
                freeGamesContainer.appendChild(gameCard);
            });
        }

        // --- TheMealDB API Functions ---
        async function fetchRandomRecipe() {
            showLoading('recipe', true);
            hideError('recipe');
            recipeContainer.innerHTML = '';

            try {
                const response = await fetch(MEALDB_RANDOM_API_URL);
                if (!response.ok) throw new Error(`TheMealDB API yanıt vermedi (${response.status})`);
                const data = await response.json();

                if (data.meals && data.meals.length > 0) {
                    displayRandomRecipe(data.meals[0]);
                } else {
                    throw new Error('Tarif bulunamadı veya API formatı beklenmedik.');
                }
            } catch (error) {
                console.error('Error fetching recipe:', error);
                showError('recipe', `Tarif yüklenemedi: ${error.message}`);
            } finally {
                showLoading('recipe', false);
            }
        }

        function displayRandomRecipe(meal) {
            let ingredientsList = '';
            for (let i = 1; i <= 20; i++) {
                if (meal[`strIngredient${i}`]) {
                    ingredientsList += `<li>${meal[`strIngredient${i}`]} - ${meal[`strMeasure${i}`]}</li>`;
                } else {
                    break; 
                }
            }

            recipeContainer.innerHTML = `
                <img src="${meal.strMealThumb}" class="card-img-top" alt="${meal.strMeal}" style="max-height: 400px; object-fit: cover;">
                <div class="card-body">
                    <h3 class="card-title">${meal.strMeal}</h3>
                    <p class="card-text"><small class="text-muted">${meal.strCategory} | ${meal.strArea}</small></p>
                    <h5>Malzemeler:</h5>
                    <ul>${ingredientsList}</ul>
                    <h5>Hazırlanışı:</h5>
                    <p style="white-space: pre-wrap;">${meal.strInstructions}</p>
                    ${meal.strYoutube ? `<a href="${meal.strYoutube}" class="btn btn-danger btn-sm mt-2" target="_blank">Videoyu İzle</a>` : ''}
                    ${meal.strSource ? `<a href="${meal.strSource}" class="btn btn-info btn-sm mt-2 ms-2" target="_blank">Kaynak</a>` : ''}
                </div>
            `;
        }

        // --- Helper Functions (Generic) ---
        function showLoading(type, show) {
            const indicator = document.getElementById(`${type}LoadingIndicator`);
            if (indicator) indicator.classList.toggle('d-none', !show);
        }

        function hideError(type) {
            const errorMsgElem = document.getElementById(`${type}ErrorMessage`);
            if (errorMsgElem) {
                 errorMsgElem.classList.add('d-none');
                 errorMsgElem.textContent = '';
            }
        }

        function showError(type, message) {
            const errorMsgElem = document.getElementById(`${type}ErrorMessage`);
            if (errorMsgElem) {
                errorMsgElem.textContent = message;
                errorMsgElem.classList.remove('d-none');
            }
        }
        
        // --- Initialize ---
        if (typeof document !== 'undefined') {
            document.addEventListener('DOMContentLoaded', () => {
                // FreeToGame elements
                freeGamesContainer = document.getElementById('freeGamesContainer');
                freeGamesLoadingIndicator = document.getElementById('freeGamesLoadingIndicator');
                freeGamesErrorMessage = document.getElementById('freeGamesErrorMessage');
                getFreeGamesButton = document.getElementById('getFreeGamesButton');

                // TheMealDB elements
                recipeContainer = document.getElementById('recipeContainer');
                recipeLoadingIndicator = document.getElementById('recipeLoadingIndicator');
                recipeErrorMessage = document.getElementById('recipeErrorMessage');
                getRandomRecipeButton = document.getElementById('getRandomRecipeButton');

                // Event Listeners
                if (getFreeGamesButton) {
                    getFreeGamesButton.addEventListener('click', fetchFreeGames);
                } else {
                    console.error("Button 'getFreeGamesButton' not found.");
                    showError('freeGames', "Sayfa öğesi (oyun butonu) bulunamadı.");
                }

                if (getRandomRecipeButton) {
                    getRandomRecipeButton.addEventListener('click', fetchRandomRecipe);
                } else {
                    console.error("Button 'getRandomRecipeButton' not found.");
                    showError('recipe', "Sayfa öğesi (tarif butonu) bulunamadı.");
                }

                // Initial Fetches
                if (freeGamesContainer && getFreeGamesButton) {
                    fetchFreeGames();
                } else {
                     if (!freeGamesContainer) console.error("Container 'freeGamesContainer' not found.");
                }

                if (recipeContainer && getRandomRecipeButton) {
                    fetchRandomRecipe();
                } else {
                    if (!recipeContainer) console.error("Container 'recipeContainer' not found.");
                }
            });
        }
    </script>
</body>
</html> 