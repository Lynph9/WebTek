<?php
// PHP session ba≈ülat
session_start();

// Hata raporlamayƒ± a√ß (development i√ßin)
error_reporting(E_ALL);
ini_set('display_errors', 1);

// Doƒüru kullanƒ±cƒ± bilgileri - ger√ßek uygulamada veritabanƒ±ndan gelir
$valid_credentials = [
    'b241210385@sakarya.edu.tr' => 'b241210385'
];

// POST isteƒüi kontrol√º
if ($_SERVER['REQUEST_METHOD'] === 'POST') {
    // Gelen verileri al ve temizle
    $email = isset($_POST['email']) ? trim($_POST['email']) : '';
    $password = isset($_POST['password']) ? trim($_POST['password']) : '';
    
    // Bo≈ü alan kontrol√º
    if (empty($email) || empty($password)) {
        // Bo≈ü alanlar varsa login sayfasƒ±na geri y√∂nlendir
        header('Location: login.html?error=empty');
        exit();
    }
    
    // E-posta format kontrol√º
    if (!filter_var($email, FILTER_VALIDATE_EMAIL)) {
        // Ge√ßersiz e-posta formatƒ±
        header('Location: login.html?error=email');
        exit();
    }
    
    // Sakarya.edu.tr domain kontrol√º
    if (!str_ends_with($email, '@sakarya.edu.tr')) {
        // Sakarya e-postasƒ± deƒüil
        header('Location: login.html?error=email');
        exit();
    }
    
    // Kullanƒ±cƒ± adƒ± ve ≈üifre kontrol√º
    if (isset($valid_credentials[$email]) && $valid_credentials[$email] === $password) {
        // Ba≈üarƒ±lƒ± giri≈ü
        $_SESSION['user_email'] = $email;
        $_SESSION['user_id'] = $password; // √ñƒürenci numarasƒ±
        $_SESSION['login_time'] = date('Y-m-d H:i:s');
        
        // √ñƒürenci numarasƒ±nƒ± al (≈üifre aslƒ±nda √∂ƒürenci numarasƒ±)
        $student_number = $password;
        
        // Ba≈üarƒ±lƒ± giri≈ü sayfasƒ±nƒ± g√∂ster
        ?>
        <!DOCTYPE html>
        <html lang="tr">
        <head>
            <meta charset="UTF-8">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <title>Ba≈üarƒ±lƒ± Giri≈ü - Ki≈üisel Web Sitesi</title>
            <!-- Bootstrap CSS -->
            <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
            <!-- Font Awesome -->
            <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
            <!-- Custom CSS -->
            <link rel="stylesheet" href="css/style.css">
        </head>
        <body>
            <!-- Navbar -->
            <nav class="navbar navbar-expand-lg navbar-dark">
                <div class="container">
                    <a class="navbar-brand" href="index.html">
                        <i class="fas fa-code me-2"></i>Ki≈üisel Portfolyo
                    </a>
                    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <div class="collapse navbar-collapse" id="navbarNav">
                        <ul class="navbar-nav ms-auto">
                            <li class="nav-item">
                                <a class="nav-link" href="index.html">
                                    <i class="fas fa-home me-1"></i>Hakkƒ±nda
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="cv.html">
                                    <i class="fas fa-graduation-cap me-1"></i>Eƒüitim
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="sehrim.html">
                                    <i class="fas fa-map-marker-alt me-1"></i>≈ûehrim
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="mirasimiz.html">
                                    <i class="fas fa-landmark me-1"></i>Mirasƒ±mƒ±z
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="ilgi-alanlari.html">
                                    <i class="fas fa-heart me-1"></i>ƒ∞lgi Alanlarƒ±
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link active" href="login.html">
                                    <i class="fas fa-sign-in-alt me-1"></i>Giri≈ü
                                </a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="iletisim.html">
                                    <i class="fas fa-envelope me-1"></i>ƒ∞leti≈üim
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
            </nav>

            <!-- Main Content -->
            <main class="container my-5">
                <div class="row justify-content-center">
                    <div class="col-md-8">
                        <div class="card shadow-lg border-success">
                            <div class="card-header bg-success text-white text-center">
                                <h1 class="h3 mb-0">
                                    <i class="fas fa-check-circle me-2"></i>Giri≈ü Ba≈üarƒ±lƒ±!
                                </h1>
                            </div>
                            <div class="card-body text-center">
                                <div class="mb-4">
                                    <i class="fas fa-user-check text-success" style="font-size: 4rem;"></i>
                                </div>
                                
                                <h2 class="text-success mb-3">Ho≈ügeldiniz <?php echo htmlspecialchars($student_number); ?>!</h2>
                                
                                <div class="alert alert-success" role="alert">
                                    <h5 class="alert-heading">
                                        <i class="fas fa-info-circle me-2"></i>Giri≈ü Bilgileri
                                    </h5>
                                    <hr>
                                    <p class="mb-2"><strong>E-posta:</strong> <?php echo htmlspecialchars($email); ?></p>
                                    <p class="mb-2"><strong>√ñƒürenci No:</strong> <?php echo htmlspecialchars($student_number); ?></p>
                                    <p class="mb-0"><strong>Giri≈ü Zamanƒ±:</strong> <?php echo $_SESSION['login_time']; ?></p>
                                </div>
                                
                                <div class="d-grid gap-2 d-md-flex justify-content-center">
                                    <a href="index.html" class="btn btn-primary btn-lg me-md-2">
                                        <i class="fas fa-home me-2"></i>Ana Sayfaya Git
                                    </a>
                                    <a href="cv.html" class="btn btn-outline-primary btn-lg">
                                        <i class="fas fa-user me-2"></i>Profilimi G√∂r√ºnt√ºle
                                    </a>
                                </div>
                                
                                <hr class="my-4">
                                
                                <div class="row text-start">
                                    <div class="col-md-6">
                                        <h6 class="text-primary">
                                            <i class="fas fa-globe me-2"></i>Site B√∂l√ºmleri
                                        </h6>
                                        <ul class="list-unstyled">
                                            <li><a href="index.html" class="text-decoration-none">üìç Hakkƒ±mda</a></li>
                                            <li><a href="cv.html" class="text-decoration-none">üéì Eƒüitim Bilgileri</a></li>
                                            <li><a href="sehrim.html" class="text-decoration-none">üèôÔ∏è ≈ûehrim (Eski≈üehir)</a></li>
                                            <li><a href="mirasimiz.html" class="text-decoration-none">üèõÔ∏è K√ºlt√ºrel Mirasƒ±mƒ±z</a></li>
                                        </ul>
                                    </div>
                                    <div class="col-md-6">
                                        <h6 class="text-primary">
                                            <i class="fas fa-heart me-2"></i>ƒ∞lgi Alanlarƒ± & ƒ∞leti≈üim
                                        </h6>
                                        <ul class="list-unstyled">
                                            <li><a href="ilgi-alanlari.html" class="text-decoration-none">üéÆ ƒ∞lgi Alanlarƒ±m</a></li>
                                            <li><a href="iletisim.html" class="text-decoration-none">üìß ƒ∞leti≈üim Formu</a></li>
                                            <li><a href="logout.php" class="text-decoration-none text-danger">üö™ √áƒ±kƒ±≈ü Yap</a></li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                            <div class="card-footer bg-light text-center">
                                <small class="text-muted">
                                    <i class="fas fa-shield-alt me-1"></i>
                                    G√ºvenli giri≈ü ger√ßekle≈ütirildi - Session ID: <?php echo substr(session_id(), 0, 8); ?>
                                </small>
                            </div>
                        </div>
                    </div>
                </div>
            </main>

            <!-- Footer -->
            <footer class="text-white py-4">
                <div class="container">
                    <div class="row">
                        <div class="col-md-4 mb-3 mb-md-0">
                            <h5>Ki≈üisel Portfolyo</h5>
                            <p class="small">Web Teknolojileri dersi kapsamƒ±nda hazƒ±rlanmƒ±≈ü ki≈üisel web sitesi projesi.</p>
                        </div>
                        <div class="col-md-4 mb-3 mb-md-0">
                            <h5>Hƒ±zlƒ± Baƒülantƒ±lar</h5>
                            <div class="footer-links">
                                <a href="index.html">Hakkƒ±nda</a>
                                <a href="cv.html">Eƒüitim</a>
                                <a href="sehrim.html">≈ûehrim</a>
                                <a href="mirasimiz.html">Mirasƒ±mƒ±z</a>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <h5>ƒ∞leti≈üim</h5>
                            <p class="small">
                                <i class="fas fa-envelope me-2"></i><a href="mailto:erkinerdogan.dev@gmail.com" class="text-white text-decoration-none">erkinerdogan.dev@gmail.com</a>
                            </p>
                        </div>
                    </div>
                    <hr class="my-3 bg-light opacity-25">
                    <div class="text-center">
                        <p class="small mb-0">&copy; 2024 Ki≈üisel Web Sitesi. T√ºm haklarƒ± saklƒ±dƒ±r.</p>
                    </div>
                </div>
            </footer>

            <!-- Bootstrap JS -->
            <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
        </body>
        </html>
        <?php
    } else {
        // Hatalƒ± giri≈ü
        header('Location: login.html?error=login');
        exit();
    }
} else {
    // GET istekleri i√ßin login sayfasƒ±na y√∂nlendir
    header('Location: login.html');
    exit();
}
?> 